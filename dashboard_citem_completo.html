<!DOCTYPE html>
<!--
=================================================================
DASHBOARD INTEGRADO - ESCOLAS √ó DIRETORIAS √ó FROTA [CITEM COMPLETO]
=================================================================

EXPANS√ÉO COMPLETA IMPLEMENTADA:
‚úÖ Base CITEM completa: 5.582 escolas de todos os tipos
‚úÖ Coordenadas geod√©sicas precisas: 100% das escolas mapeadas
‚úÖ 10 tipos de escola: Regular, Ind√≠gena, Quilombola, Assentamento, etc.
‚úÖ 89 Diretorias/Unidades Regionais de Ensino mapeadas
‚úÖ Sistema de filtros por tipo de escola implementado
‚úÖ Mapa interativo com todos os marcadores e coordenadas

TIPOS DE ESCOLA DISPON√çVEIS:
- üè´ REGULAR (4.964 escolas)
- üë• IND√çGENA (43 escolas)  
- üèõÔ∏è QUILOMBOLA (16 escolas)
- üöú ASSENTAMENTO (4 escolas)
- üìö CEEJA (43 escolas)
- üéì CEL JTO (165 escolas)
- üè• HOSPITALAR (71 escolas)
- üè¢ PENITENCI√ÅRIA (163 escolas)
- üë¶ SOCIOEDUCATIVO (36 escolas)
- üë®‚Äçüéì SOCIOEDUCATIVO ADOLESCENTE (77 escolas)

FONTES DE DADOS ATUALIZADAS:
- Escolas: dados_escolas_atualizados_completo.json (5.582 escolas)
- Coordenadas: 100% v√°lidas com formato decimal correto
- Unidades Regionais: 89 UREs mapeadas
- Metodologia: Dados diretos do sistema CITEM oficial

Data da √∫ltima atualiza√ß√£o: 11/08/2025 - 22:37
Status: PRODU√á√ÉO COMPLETA (base CITEM integral)
=================================================================
-->
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Integrado - Escolas √ó Diretorias √ó Frota [CITEM COMPLETO]</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.js"></script>

    <!-- Coordenadas do Estado -->
    <script type="module" src="static/js/coordenadas_completa.js"></script>
    <script type="module" src="static/js/coordenadas_simples.js"></script>
    <script src="static/js/modules/coordinates-loader.js"></script>

    <!-- M√≥dulos do Dashboard - VERS√ÉO CITEM COMPLETA -->
    <script src="static/js/modules/data-loader-citem-completo.js"></script>
    <script src="static/js/modules/ui-components.js"></script>
    <script src="static/js/modules/map-components.js"></script>
    <script src="static/js/modules/charts.js"></script>
    <script src="static/js/modules/events.js"></script>
    <script src="static/js/modules/type-filters.js"></script>

    <!-- Dashboard Principal -->
    <script src="static/js/dashboard-main.js"></script>
    <link rel="stylesheet" href="static/css/dash.css">
    <link rel="stylesheet" href="static/css/dashboard-citem-completo.css">
</head>

<body>
    <div class="header">
        <h1>üéØ Dashboard Integrado - Sistema CITEM Completo</h1>
        <p class="subtitle">5.582 Escolas de Todos os Tipos √ó 89 Unidades Regionais √ó An√°lise Completa</p>
    </div>

    <div class="main-container">
        <!-- Estat√≠sticas Gerais -->
        <div class="stats-section">
            <div class="stat-card escolas">
                <div class="stat-number" id="total-schools">5,582</div>
                <div class="stat-label">Total de Escolas</div>
            </div>
            <div class="stat-card diretorias">
                <div class="stat-number" id="total-diretorias">89</div>
                <div class="stat-label">Unidades Regionais</div>
            </div>
            <div class="stat-card tipos">
                <div class="stat-number" id="total-tipos">10</div>
                <div class="stat-label">Tipos de Escola</div>
            </div>
            <div class="stat-card coordenadas">
                <div class="stat-number" id="coordenadas-validas">100%</div>
                <div class="stat-label">Com Coordenadas</div>
            </div>
            <div class="stat-card regulares">
                <div class="stat-number" id="regulares-count">4,964</div>
                <div class="stat-label">Escolas Regulares</div>
            </div>
        </div>

        <!-- Filtros por Tipo de Escola -->
        <div class="filters-section">
            <h3>üéõÔ∏è Filtros por Tipo de Escola</h3>
            <div class="type-filters">
                <button class="type-filter-btn active" data-type="all">
                    <span class="filter-icon">üè´</span>
                    <span class="filter-text">Todas (5,582)</span>
                </button>
                <button class="type-filter-btn" data-type="regular">
                    <span class="filter-icon">üè´</span>
                    <span class="filter-text">Regular (4,964)</span>
                </button>
                <button class="type-filter-btn" data-type="indigena">
                    <span class="filter-icon">üë•</span>
                    <span class="filter-text">Ind√≠gena (43)</span>
                </button>
                <button class="type-filter-btn" data-type="quilombola">
                    <span class="filter-icon">üèõÔ∏è</span>
                    <span class="filter-text">Quilombola (16)</span>
                </button>
                <button class="type-filter-btn" data-type="assentamento">
                    <span class="filter-icon">üöú</span>
                    <span class="filter-text">Assentamento (4)</span>
                </button>
                <button class="type-filter-btn" data-type="ceeja">
                    <span class="filter-icon">üìö</span>
                    <span class="filter-text">CEEJA (43)</span>
                </button>
                <button class="type-filter-btn" data-type="cel_jto">
                    <span class="filter-icon">üéì</span>
                    <span class="filter-text">CEL JTO (165)</span>
                </button>
                <button class="type-filter-btn" data-type="hospitalar">
                    <span class="filter-icon">üè•</span>
                    <span class="filter-text">Hospitalar (71)</span>
                </button>
                <button class="type-filter-btn" data-type="penitenciaria">
                    <span class="filter-icon">üè¢</span>
                    <span class="filter-text">Penitenci√°ria (163)</span>
                </button>
                <button class="type-filter-btn" data-type="socioeduc">
                    <span class="filter-icon">üë¶</span>
                    <span class="filter-text">Socioeducativo (113)</span>
                </button>
            </div>
        </div>

        <!-- Gr√°ficos de An√°lise -->
        <div class="charts-container" style="grid-template-columns: 1fr 1fr 1fr;">
            <div class="chart-panel">
                <h3>üìä Distribui√ß√£o por Tipo</h3>
                <div class="chart-container">
                    <canvas id="typeChart"></canvas>
                </div>
            </div>
            <div class="chart-panel">
                <h3>üåç Escolas por Regi√£o</h3>
                <div class="chart-container">
                    <canvas id="regionChart"></canvas>
                </div>
            </div>
            <div class="chart-panel">
                <h3>üéØ Cobertura Territorial</h3>
                <div class="chart-container">
                    <canvas id="coverageChart"></canvas>
                </div>
            </div>
        </div>

        <!-- Se√ß√£o Principal: Mapa e Lista -->
        <div class="main-content">
            <!-- Mapa Interativo -->
            <div class="panel map-panel">
                <h3>üó∫Ô∏è Mapa Interativo - Sistema CITEM Completo</h3>

                <div id="map"></div>

                <!-- Legenda do Mapa -->
                <div class="map-legend">
                    <h4>üìç Legenda do Mapa</h4>
                    <div class="legend-item">
                        <span class="legend-icon" style="color: #8B4513;">‚óè</span>
                        <span>Escolas Ind√≠genas (<span id="indigena-count">43</span>)</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-icon" style="color: #800080;">‚óè</span>
                        <span>Escolas Quilombolas (<span id="quilombola-count">16</span>)</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-icon" style="color: #228B22;">‚óè</span>
                        <span>Escolas de Assentamento (<span id="assentamento-count">4</span>)</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-icon" style="color: #4169E1;">‚óè</span>
                        <span>Escolas Regulares (<span id="regular-count">4,964</span>)</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-icon" style="color: #FF6347;">‚óè</span>
                        <span>CEEJA (<span id="ceeja-count">43</span>)</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-icon" style="color: #FF8C00;">‚óè</span>
                        <span>CEL JTO (<span id="cel-jto-count">165</span>)</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-icon" style="color: #DC143C;">‚óè</span>
                        <span>Hospitalar (<span id="hospitalar-count">71</span>)</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-icon" style="color: #2F4F4F;">‚óè</span>
                        <span>Penitenci√°rias (<span id="penitenciaria-count">163</span>)</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-icon" style="color: #9932CC;">‚óè</span>
                        <span>Socioeducativo (<span id="socioeduc-count">113</span>)</span>
                    </div>
                </div>

                <!-- Controles do Mapa -->
                <div class="map-controls">
                    <h4>üéõÔ∏è Controles do Mapa</h4>
                    <div class="control-buttons">
                        <button id="toggle-coordinates-btn" class="toggle-btn" data-mode="simple">
                            <span class="btn-icon">üó∫Ô∏è</span>
                            <span class="btn-text">Mostrar Munic√≠pios</span>
                        </button>
                        <button id="fullscreen-btn" class="toggle-btn fullscreen-btn">
                            <span class="btn-icon">üîç</span>
                            <span class="btn-text">Tela Cheia</span>
                        </button>
                        <button id="cluster-btn" class="toggle-btn">
                            <span class="btn-icon">üìç</span>
                            <span class="btn-text">Agrupar Pr√≥ximas</span>
                        </button>
                    </div>
                    <div class="control-info">
                        <small id="coordinates-info">Modo: Sistema CITEM Completo</small>
                    </div>
                </div>
            </div>

            <!-- Lista de Escolas -->
            <div class="panel">
                <h3>üìã Escolas do Sistema CITEM</h3>

                <div class="filters">
                    <div class="filter-group">
                        <button class="filter-btn active" data-filter="all">Todas</button>
                        <button class="filter-btn" data-filter="indigena">Ind√≠genas</button>
                        <button class="filter-btn" data-filter="quilombola">Quilombolas</button>
                        <button class="filter-btn" data-filter="assentamento">Assentamentos</button>
                        <button class="filter-btn" data-filter="regular">Regulares</button>
                        <button class="filter-btn" data-filter="especiais">Especiais</button>
                    </div>
                    <input type="text" class="search-box" placeholder="üîç Buscar escola, cidade ou unidade regional..."
                        id="search-input">
                </div>

                <div class="school-list" id="school-list">
                    <!-- Escolas ser√£o carregadas aqui -->
                </div>
            </div>
        </div>
    </div>

    <!-- Overlay de Tela Cheia do Mapa -->
    <div id="map-fullscreen-overlay" class="fullscreen-overlay hidden">
        <div class="fullscreen-header">
            <h2>üó∫Ô∏è Mapa Interativo - Sistema CITEM Completo</h2>
            <div class="fullscreen-controls">
                <div class="fullscreen-stats">
                    <span id="visible-schools-count">5,582 escolas vis√≠veis</span>
                </div>
                <button id="exit-fullscreen-btn" class="exit-btn">
                    <span class="btn-icon">‚úï</span>
                    <span class="btn-text">Sair da Tela Cheia</span>
                </button>
            </div>
        </div>
        <div id="map-fullscreen-container" class="fullscreen-map">
            <!-- Mapa ser√° criado aqui -->
        </div>
    </div>

</body>

</html>